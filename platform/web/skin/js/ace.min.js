if (! ("ace" in window)) {
    window.ace = {}
}
jQuery(function(a) {
    window.ace.click_event = a.fn.tap ? "tap": "click";
    ace.handle_side_menu(jQuery);
    ace.general_things(jQuery);
    $('.sel-icon').InsertIcon();
    if($.fn.slimscroll){
        $('.nav-list').slimscroll({
            height:($(window).height() - 72)+'px',
        });
    }
});
ace.handle_side_menu = function(a) {
	a("#menu-toggler").on(ace.click_event,
    function() {
        a("#sidebar").toggleClass("display");
        a(this).toggleClass("display");
        return false
    });
    var c = a("#sidebar").hasClass("menu-min");
    a("#sidebar-collapse").on(ace.click_event,
    function() {
        c = a("#sidebar").hasClass("menu-min");
        ace.settings.sidebar_collapsed(!c)
    });
    var b = navigator.userAgent.match(/OS (5|6|7)(_\d)+ like Mac OS X/i);
    a(".nav-list").on(ace.click_event,
    function(h) {
        var g = a(h.target).closest("a");
        if (!g || g.length == 0) {
            return
        }
        c = a("#sidebar").hasClass("menu-min");
        var f = g.next().get(0);
        if (!a(f).is(":visible")) {
            var d = a(f.parentNode).closest("ul");
            if (c && d.hasClass("nav-list")) {
                return
            }
            d.find("> .open > .submenu").each(function() {
                if (this != f && !a(this.parentNode).hasClass("active")) {
                    a(this).slideUp(200).parent().removeClass("open")
                }
            })
        } else {}
        if (c && a(f.parentNode.parentNode).hasClass("nav-list")) {
            return false
        }
        a(f).slideToggle(200).parent().toggleClass("open");
        return false
    })
};
ace.general_things = function(a) {
    a("#btn-scroll-up").on(ace.click_event,
    function() {
        var c = Math.min(400, Math.max(100, parseInt(a("html").scrollTop() / 3)));
        a("html,body").animate({
            scrollTop: 0
        },
        c);
        return false
    });
};
ace.editorConfig = {
    toolbar:[
    'source | undo redo | bold italic underline strikethrough | justifyleft justifycenter justifyright | forecolor backcolor removeformat |',
        'insertorderedlist insertunorderedlist | selectall cleardoc | fontfamily fontsize' ,
        '| superscript subscript | ',
        'link unlink | emotion image',
        '| horizontal'
    ],
    initialFrameWidth:600,
    initialFrameHeight:300,
    autoHeightEnabled:false,
}

function showMsg(msg,callback){
    var color = '';
    if(callback === true){
        color = 'style="color:red;"';
    }
    var e = bootbox.dialog({
        message: "<span "+color+">"+msg+"</span>",
        show:!1,
        width:'400px'
    });
    e.on("show.bs.modal",function() {
        setTimeout(function(){
           e.modal('hide');
        },1000)
    });
    if($.isFunction(callback)){
        e.on("hidden.bs.modal",callback);
    };
    e.modal("show");
}

